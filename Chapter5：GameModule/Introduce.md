## 这是第五期的内容
一个游戏状态管理和场景切换的游戏模块
## 以下是文案
哈喽大家好，这里是猫薄荷！这一期我们来制作游戏管理模块。

在此我先做个预告。接下来几期，我将对前面的模块进行功能升级。输入模块将使用枚举类型，把设置按键的功能封装为简单的函数，连招组合键将添加中断计时和触发计时，更加真实稳定。UI模块将实现数据修改时自动更新，这是之前提过的。数据模块将实现按键绑定的读取和保存，这样玩家自定义的按键才不会丢失。演出模块将实现CG的播放，提升演出效果。与此同时我会准备相关的美术资源，包括cg，人物素材，物品素材，场景素材等，为后面游戏场景的搭建做准备。接下来我们回到正题。



如第一期所说，游戏管理模块管理游戏状态，而游戏状态的改变会影响输入模块的按键映射。当我们从游戏场景切换到主菜单，同样的按键将触发不同的动作。

除此之外，游戏模块还应该具有改变场景的能力，在不同的界面和游戏场景之间切换。

这就是我们将要制作的两个功能：游戏状态和游戏物体切换。

先来制作游戏状态功能

首先，我们创建一个游戏状态的枚举类型，使用UI\SCENE\CG这样的名称代替原先的整数，让代码更加安全规范。

然后，我们更改输入模块的相应代码，让他们能够使用新的gameState。

最后，在Start函数中设置最初的游戏状态为UI。这个功能就完成了。



接下来是模块切换功能

数据结构如下。

一个整数GAMEMODULE_OBJECTS_NUM代表切换列表的大小。

一个GameObject类的数组，存储我们的界面和场景

一个字符串NowGameObject存储当前模块的名字

一个字符串NextGameObject存储将要切换到的模块名字

方法如下。

两个函数用于其他模块设置名字

一个设置整组状态的函数，用于初始化

一个切换模块的函数，根据名字在列表中搜寻模块，并取消激活当前模块，激活将要切换的模块，搜寻不到时将不进行操作。

一个初始化函数，在游戏开始时激活名为TitleUI的游戏物体，禁用其他所有

最后我们把初始化函数添加到Start函数



最后我们把游戏模块和UI模块连接在一起，这很简单。

首先把所有要切换的游戏物体拖入游戏模块的数组

然后在UI模块的按钮事件上添加设置NowGameObject和NextGameObject的函数，这样就可以了。我们知道，根据上一期的内容，按下按钮后，UI模块将自动播放动画，动画播放结束就会触发游戏模块的切换，使得NowGameObject取消激活，激活NextGameObject，这样就完成了不同UI或关卡的切换。
