## 这是第六期的内容
输入模块更加标准好用，共提供五个功能：根据游戏状态映射不同按键、单键连招组合键、连招丢失和组合键冷却计时、改键、保存读取键位表


## 以下是文案
哈喽大家好，这里是猫薄荷！这一期我要给大家隆重介绍输入模块的升级版，先来看最终效果。

我做了一个简单的调试界面，通过这个界面我们可以方便地查看不同游戏状态下的按键映射。

如你所见，不同的游戏状态对应着不同的按键映射，这是第一个功能。



接下来是单键、连招、组合键的检测。

当我们按下单个按键时，下方日志会打印出对应的动作、游戏状态、按键和检测模式，便于我们查看分析。

当我们完成连招，日志则会打印对应的动作、游戏状态、和连招表

如果我们完成组合键，日志同样会打印对应信息，这是第二个功能。



接下来是连招丢失和组合键冷却，我们可以看到，如果我们按键之间的间隔超过丢失时间，连招的缓存将被清空，从而无法触发。而组合键则是需要等待冷却时间再按下，否则无法触发。



接下来是改键功能，当我们进入改键状态，按下空格/手柄A/鼠标左键+任意键，就会把任意键设为要修改的按键。比如默认要修改的是第一个按键，按下空格+s，就可以看到scene状态下，w和s键互换了。



接下来展示按键数据的保存和读取。当游戏启动时，数据模块会检测按键数据是否存在，如果不存在就会创建新的，如果存在就会读取并覆盖输入模块的初始化数据。这些行为从日志就可以看到。



下面讲解使用方式，比原先简单得多。我们只需要在start函数中调用这三个按键配置函数，即可完成全部配置。在实际使用时，只需要监听对应按键事件就可以了。连招和组合键的计时器可以之间在编辑器修改。改键功能则需要进入改键状态、设定要修改的按键、触发改键这三个步骤，前两个我封装成了一个函数，可以供UI方便地调用。而触发改键就更加简单，因为它本质上只是一个会触发改键函数的连招，按照连招的方法配置即可。



这样我们就完成了一波大升级，只有强大的输入模块才能够支持我们制作好玩的游戏。如果这期视频能给你带来启发，求求大家的点赞和三连，画画真的好难qaq

